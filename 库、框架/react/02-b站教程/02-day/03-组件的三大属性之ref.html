<!--
 * @Descripttion: 
 * @Author: 温祖彪
 * @Date: 2021-07-12 23:13:14
 * @LastEditors: sueRimn
 * @LastEditTime: 2021-07-19 18:58:38
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>hello world</title>
  <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

</head>

<body>
  <!-- 容器, 与 vue 概念类似 -->
  <div id="root"></div>
</body>

</html>

<script type="text/babel"> /** 使用 babel 转译 jsx */
  class MyComponent extends React.Component {
    // 如果这样定义的箭头函数, 那么 this 引用的就是实例 -> 这是 class 的语法
    // showData = () => {
    /**
     * class 也相当与一个语法糖而已, 类似于
     * function MyComponent() {
     *  // 而在这里的 this就是指向实例
     *  this.showData = () => { // 这里的 this 引用的是外层的 this }
     * }
     */
    // console.log(this); // 这样定义的 this 引用的作用域的 this, 而在 class 有其特殊性, 表示的就是实例
    // }
    showData() {
      console.log(this);
    }

    saveInput = (c) => {
      console.log(c);
    }

    myRef = React.createRef(); // 创建一个 ref 容器

    render() {
      /**
       * ref 定义方式
       *    1: 字符串形式, 例如 -> ref="input1"
       *        目前不推荐使用, 并在未来版本中可能会被弃用, 主要是因为存在效率低下问题
       *    2. 回调方式, 例如 -> ref="element => console.log(element)"
       *    3. createRef 方式, 最推荐的方式
       *        
       */
      return (
        <div>
          { /** 字符串形式 */}
          <input ref="input1" type="text" placeholder="点击按钮提示数据" />
          <button onClick={() => this.showData()}>点我提示左侧的数据</button>
          { /** 回调形式: 这种形式会在更新过程执行两次 */}
          <input ref={element => console.log(element)} type="text" placeholder="失去焦点提示数据" />
          { /** 回调形式: 使用 class 绑定函数方式, 即将方法挂载在 class 中 */}
          <input ref={this.saveInput} type="text" placeholder="失去焦点提示数据" />
          { /** createRef 形式, 会将该 DOM 或组件存入到 this.myRef 变量中 */}
          <input ref={this.myRef} type="text" placeholder="失去焦点提示数据" />
        </div>
      )
    }
  }

  ReactDOM.render(<MyComponent />, document.getElementById('root'));
</script>