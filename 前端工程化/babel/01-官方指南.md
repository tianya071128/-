## 1. 指南

### 1.1 Babel 是什么？

#### Babel 是一个 JS 编译器

Babel 是一个工具链，主要用于将 ECMAScript 2015+版本的代码转换为向后兼容的 JS 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。

* 语法转换
* 通过 Polyfill 方式在目标环境中添加缺失的特性（通过 `@babel/polyfill` 模块）
* 源码转换(codemods)
* 。。。

#### 插件化

Babel 构建在插件之上。使用现有的或者自己编写的插件可以组成一个转换管道。



### 1.2 使用指南

Babel 工具链是由大量的工具组成的，无论你是“ 最终用户”还是继承 Babel，这些工具都简化了 Babel 的使用。

**更详细的用法见 `用法` 章节**

#### CLI命令行的基本用法

你所需要的所有的 Babel 模块都是作为独立的 npm 包发布的，并且（从版本7开始）都是以 `@babel` 作为冠名的。**这种模块化的设计能够让每种工具都针对特定使用情况进行设计。**

可以着中看一下 `@babel/core` 和 `@babel/cli`

* 核心库：`@babel/core` 模块中

  > 在 js 程序中直接 `require` 并使用它：
  >
  > ```javascript
  > const babel = require('@babel/core');
  > 
  > babel.transform("code", optionsObject);
  > ```

* CLI 命令行工具：`@babel/cli`

  > 是一个能够从终端（命令行）使用的工具。需要配合 `@babel/core` 模块使用
  >
  > ```shell
  > npm install --save-dev @babel/core @babel/cli
  > 
  > # 将 src 目录下的文件输出到 lib 目录下，也可通过 npx babel 执行
  > ./node_modules/.bin/babel src --out-dir lib
  > ```

#### 插件和预设（preset）

* 插件：**代码转换功能以插件的形式出现，插件是小型的 `JavaScript` 程序，用于指导 Babel 如何对代码进行转换。甚至也可以编写自己的插件将你所需要的任何代码转换功能应用到你的代码上。**

  > ```shell
  > # 将 ES2015+ 箭头函数语法转换为 ES5 语法
  > npm install -D @babel/plugin-transform-arrow-functions
  > ```
  >
  > ```javascript
  > const fn = () => 1;
  > 
  > // 转换后
  > var fn = function fn() {
  >     return 1;
  > }
  > ```
  >
  > **这样一个个添加插件用于转换比较麻烦，所以可以使用 `preset` **

* 预设(preset)：**将所需要的插件组合创建一个自己的 preset 并将其分享出去。**

  > ```shell
  > npm install --save-dev @babel/preset-env
  > 
  > ./node_modules/.bin/babel src --out-dir lib --presets=@babel/env
  > ```